---
// src/pages/ActualizarParqueaderoPage.astro
import ActualizarParqueadero from '../components/ActualizarParqueadero';
import '../styles/global.css';

const id: string | null = Astro.url.searchParams.get('id');

const fetchParqueaderoData = async (id: string | null) => {
  if (id) {
    try {
      const response = await fetch(`http://localhost:2402/api/Parqueadero/parqueadero/${id}`);
      if (!response.ok) {
        throw new Error('Error al obtener los datos del parqueadero');
      }
      return await response.json();
    } catch (error) {
      console.error('Error al cargar los datos del parqueadero:', error);
      return null;
    }
  }
  return null;
};

const parqueaderoData = await fetchParqueaderoData(id);
---

<html lang="es">
  <head>
    <title>QuickPark - Registro</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <main>
      {parqueaderoData ? (
        <ActualizarParqueadero parqueadero={parqueaderoData} client:load />
      ) : (
        <p>Cargando datos del parqueadero...</p>
      )}
    </main>
  </body>
</html>
