---
import Layout from '../layouts/Layout.astro';
import Parqueaderos from '../components/Parqueaderos.astro';

// Define la interfaz para los parqueaderos
interface Parqueadero {
    img: string;
    nombre: string;
    direccion: string;
    diaVisita: string;
    horaEntrada: string;
    horaSalida: string;
    tarifa: string;
}

// Inicializa parqueaderos como un array vacío
let parqueaderos: Parqueadero[] = [];

// Función para obtener los datos de los parqueaderos
const fetchParqueaderos = async () => {
    try {
        const response = await fetch('http://localhost:2402/api/Parqueadero/parqueadero'); // Cambia esto por la URL de tu API
        if (!response.ok) {
            throw new Error('Error al cargar los parqueaderos');
        }
        parqueaderos = await response.json();
    } catch (error) {
        console.error(error);
        parqueaderos = []; // Manejo de errores
    }
};

// Llamada a la función para obtener los datos al cargar la página
await fetchParqueaderos();
---

<Layout title="Welcome to Astro.">
    <div class="container mx-auto p-4 bg-gradient-to-r from-gray-100 to-green-100 min-h-screen flex flex-col items-center justify-center">
        <div class="flex flex-col md:flex-row justify-center w-full max-w-4xl space-y-4 md:space-y-0" style="margin: 5%;">
            <Parqueaderos parqueaderos={parqueaderos} />
        </div>
    </div>
</Layout>
